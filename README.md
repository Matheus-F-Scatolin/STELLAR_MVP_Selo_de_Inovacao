# ‚≠ê Prot√≥tipo STELLAR para Avalia√ß√£o - Selo de Inova√ß√£o SBC 2025

## ‚ÑπÔ∏è Descri√ß√£o

Este reposit√≥rio cont√©m o prot√≥tipo funcional do projeto **STELLAR**, submetido ao Concurso do Selo de Inova√ß√£o SBC - 2025.

STELLAR (Structured, Trustworthy, and Explainable LLM-Led Architecture for Reliable Customer Support) √© uma arquitetura modular inovadora, baseada em Grafo Ac√≠clico Direcionado (DAG) e Large Language Models (LLMs), para a constru√ß√£o de sistemas de suporte ao cliente (Customer Support - CS) inteligentes, confi√°veis e explic√°veis. O objetivo √© orquestrar LLMs de forma controlada, garantindo previsibilidade, rastreabilidade e seguran√ßa nas intera√ß√µes automatizadas.

Este prot√≥tipo demonstra a implementa√ß√£o da arquitetura e seus m√≥dulos principais, utilizando dados publicamente dispon√≠veis da Bradesco Seguros como estudo de caso.

## üèóÔ∏è Arquitetura e M√≥dulos: Vis√£o Geral

A arquitetura STELLAR √© organizada como um Grafo Ac√≠clico Direcionado (DAG) composto por m√≥dulos especializados, projetados para garantir um fluxo de intera√ß√£o controlado e confi√°vel. As figuras a seguir ilustram a estrutura geral e o papel de cada componente principal.

**Estrutura Geral (DAG):**

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/complete_workflow_wobg.png" alt="Diagrama DAG Completo STELLAR" width="450"/>
</p>
(Figura 1: Vis√£o completa da arquitetura STELLAR em DAG, mostrando todos os m√≥dulos e as poss√≠veis transi√ß√µes entre eles, que resultam nos 11 fluxos de trabalho predefinidos.)

**Fluxos Principais e Pontos de Decis√£o:**

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/simplified_workflows.jpg" alt="Fluxos Simplificados e Pontos de Decis√£o" width="400"/>
</p>
(Figura 2: Ilustra√ß√£o simplificada destacando os tr√™s caminhos iniciais principais (acionados pelo M√≥dulo 1: Roteamento) e o papel dos M√≥dulos 8 (Verifica√ß√£o com Usu√°rio) e 9 (Verifica√ß√£o de Conformidade) como pontos chave de decis√£o e diverg√™ncia de fluxo.)

---

**Componentes Modulares:**

A seguir, uma breve descri√ß√£o da fun√ß√£o de cada m√≥dulo, acompanhada de seu diagrama representativo:

### M√≥dulo 1: Classificador de Inten√ß√£o

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_1.png" alt="Diagrama M√≥dulo 1" width="300"/>
</p>
(Analisa a consulta inicial do usu√°rio e a direciona para o caminho de resolu√ß√£o mais adequado (FAQ, Informa√ß√£o Direta, Atendente Humano ou Irrelevante)

### M√≥dulo 2: Recupera√ß√£o de FAQ (RAG)

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module2.png" alt="Diagrama M√≥dulo 2" width="300"/>
</p>
(Responde a perguntas gerais utilizando Retrieval-Augmented Generation (RAG) h√≠brido sobre a base de conhecimento de FAQs)

### M√≥dulo 3: Recuperador de Informa√ß√µes Diretas

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_3.png" alt="Diagrama M√≥dulo 3" width="300"/>
</p>
(Extrai informa√ß√µes factuais e espec√≠ficas (ex: contatos, detalhes de planos) diretamente de um corpus de informa√ß√£o pr√©-definido via *in-context learning*)

### M√≥dulo 4: Gerenciador de Contexto para Agente Humano

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_4.png" alt="Diagrama M√≥dulo 4" width="300"/>
</p>
(Prepara o contexto da intera√ß√£o, calcula um score de urg√™ncia e gerencia o encaminhamento ou fila de espera para um agente humano)

### M√≥dulo 5: An√°lise de Sentimento

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module5.png" alt="Diagrama M√≥dulo 5" width="300"/>
</p>
(Avalia o tom emocional expresso pelo usu√°rio durante a intera√ß√£o, fornecendo um input para a avalia√ß√£o de urg√™ncia.)

### M√≥dulo 6: Coletor de Feedback

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_6.png" alt="Diagrama M√≥dulo 6" width="300"/>
</p>
(Coleta feedback estruturado (escalas) e textual do usu√°rio ao final da intera√ß√£o e classifica automaticamente os coment√°rios)

### M√≥dulo 7: Construtor de Base de Conhecimento

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_7.jpg" alt="Diagrama M√≥dulo 7" width="300"/>
</p>
(Identifica consultas n√£o resolvidas automaticamente e gera rascunhos de novas entradas de FAQ para revis√£o humana, facilitando a melhoria cont√≠nua da base de conhecimento)

### M√≥dulo 8: Verificador de Resolu√ß√£o

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_8.png" alt="Diagrama M√≥dulo 8" width="300"/>
</p>
(Verifica explicitamente com o usu√°rio, atrav√©s de uma pergunta contextualizada, se a resposta ou solu√ß√£o autom√°tica fornecida resolveu sua necessidade)

### M√≥dulo 9: Verificador de Conformidade

<p align="center">
  <img src="STELLAR_Selo_de_Inovacao/images/module_9.png" alt="Diagrama M√≥dulo 9" width="300"/>
</p>
(Atua como um gatekeeper de seguran√ßa e qualidade, avaliando se as respostas geradas por LLMs atendem a crit√©rios predefinidos (confidencialidade, tom, completude, etc.) antes de serem exibidas ao usu√°rio)

---


## üõ†Ô∏è Pr√©-requisitos

Para executar e avaliar este prot√≥tipo, voc√™ precisar√° de:

1.  **Conta Google:** Para usar o Google Colab e o Google Drive.
2.  **Conta Groq:** Para gerar uma chave de API (necess√°ria para acesso aos LLMs utilizados). Crie em [https://groq.com/](https://groq.com/).
3.  **Conta Hugging Face:** Para gerar um token de acesso (necess√°rio para o M√≥dulo 5 - An√°lise de Sentimento). Crie em [https://huggingface.co/](https://huggingface.co/).

##  üß≠ Instru√ß√µes para Execu√ß√£o e Avalia√ß√£o (Ambiente Recomendado: Google Colab)

Siga os passos abaixo para configurar e executar o prot√≥tipo:

1. üíæ **Download e Upload para Google Drive:**
    *   Fa√ßa o download completo deste reposit√≥rio (`STELLAR_MVP_Selo_de_Inovacao`) como um arquivo ZIP ou clone-o.
    *   Descompacte (se necess√°rio) e fa√ßa o **upload da pasta inteira** para o seu Google Drive.
    *   **Anote o caminho** completo onde a pasta foi salva no seu Google Drive (ex: `MyDrive/Colab Notebooks/STELLAR_MVP_Selo_de_Inovacao`).

2. üíª **Abrir o Notebook no Google Colab:**
    *   Navegue at√© a pasta `STELLAR_MVP_Selo_de_Inovacao` dentro do seu Google Drive.
    *   Localize o arquivo `STELLAR.ipynb`.
    *   Clique com o bot√£o direito sobre o arquivo e selecione "Abrir com" > "Google Colaboratory".

3. üó∫Ô∏è **Configurar o Caminho do Projeto:**
    *   No notebook `STELLAR.ipynb` que abriu no Colab, localize a **primeira c√©lula de c√≥digo**.
    *   Edite a vari√°vel `STELLAR_path` e **substitua o valor existente pelo caminho completo** da pasta no seu Google Drive (anotado no passo 1).
    *   OBS: O caminho deve indicar o local da pasta interna `STELLAR_Selo_de_Inovacao`, e n√£o da pasta externa, que cont√©m este README.
        *   *Exemplo:* `STELLAR_path = "/content/drive/MyDrive/Colab Notebooks/STELLAR_MVP_Selo_de_Inovacao"`

4. üîë **Configurar Chaves de API e Token (Via Colab Secrets):**
    *   **Gere suas chaves/tokens:** Acesse suas contas Groq e Hugging Face e gere uma API Key (Groq) e um Access Token (Hugging Face - geralmente com permiss√£o de leitura).
    *   **Adicione os Secrets no Colab:**
        *   No ambiente do Colab, clique no √≠cone de chave (üîë) no painel lateral esquerdo ("Secrets").
        *   Crie um novo secret chamado `GROQ_API_KEY` e cole sua chave de API da Groq como valor.
        *   Crie outro secret chamado `HF_TOKEN` e cole seu token do Hugging Face como valor.
        *   **Importante:** Certifique-se de que a op√ß√£o "Notebook access" esteja **habilitada** para ambos os secrets.

5. ‚ñ∂Ô∏è **Executar o Prot√≥tipo:**
    *   Execute as c√©lulas do notebook `STELLAR.ipynb` **sequencialmente**, come√ßando pela se√ß√£o `1. Requirements`.
    *   A **Se√ß√£o 2 (`Modules`)** cont√©m a implementa√ß√£o de cada m√≥dulo individualmente, com exemplos de uso caso deseje test√°-los separadamente.
    *   Prossiga a execu√ß√£o at√© a **Se√ß√£o 3 (`System`)**, especificamente at√© a subse√ß√£o **`3.3.2 Workflow Examples`**. Esta se√ß√£o demonstra como executar a arquitetura completa.
    *   *Exemplo de execu√ß√£o do fluxo completo:*
        ```python
        # Escolha uma query (exemplos fornecidos ou crie a sua)
        query = "Eu sou o Jos√© e gostaria de saber como funciona o seguro dental Bradesco." # Exemplo Categoria 0 - FAQs
        # query = "Onde posso ligar para renovar meu seguro de Sa√∫de?" # Exemplo Categoria 1 - Informa√ß√£o de Contato
        # query = "Eu sou o Gabriel, do plano de seguro de vida. Preciso da ajuda de um atendente urgentemente." # Exemplo Categoria 2 - Atendente Humano
        # query = "Qual √© o maior animal do mundo?" # Exemplo Categoria 3 - N√£o pertinente

        # Instancia e processa
        workflow = WorkflowManager()
        final_state_and_logs = workflow.process_query(query)

        # O log completo ser√° impresso na c√©lula seguinte (3.3.3)
        ```

6.  üìä **Testar e Avaliar:**
    *   Execute as c√©lulas na se√ß√£o `3.3.2 Workflow Examples` para observar o prot√≥tipo processando diferentes tipos de consulta.
    *   Sinta-se √† vontade para modificar a vari√°vel `query` com suas pr√≥prias perguntas (em portugu√™s) relacionadas aos servi√ßos da Bradesco Seguros.
    *   Execute a c√©lula na se√ß√£o **`3.3.3 Log example`** ap√≥s processar uma query. O output detalhado (`final_state_and_logs`) mostrar√° informa√ß√µes cruciais para avalia√ß√£o, incluindo:
        *   `chat_history`: O hist√≥rico da conversa.
        *   `sequence_of_modules`: A sequ√™ncia exata de m√≥dulos executados (o fluxo DAG percorrido).
        *   `execution_logs`: O tempo de execu√ß√£o e a resposta fornecida por cada m√≥dulo.
        *   Outros dados relevantes sobre o estado final da intera√ß√£o.
    *   Analise esses logs para verificar o funcionamento dos diferentes fluxos de trabalho e a l√≥gica de controle da arquitetura STELLAR.

## üìÅ Estrutura do Reposit√≥rio
```bash
‚îÇ STELLAR.ipynb # Notebook principal com a implementa√ß√£o e testes
‚îÇ
‚îú‚îÄ‚îÄ‚îÄhuman_agents # Dados de exemplo para agentes humanos (M√≥dulo 4)
‚îÇ ‚îî‚îÄ‚îÄ‚îÄhuman_agents.json
‚îÇ
‚îú‚îÄ‚îÄ‚îÄimages # Imagens usadas na documenta√ß√£o/apresenta√ß√£o
‚îÇ ... (diagramas de fluxo, etc.)
‚îÇ
‚îú‚îÄ‚îÄ‚îÄlogs # Logs gerados durante a execu√ß√£o (ex: logs gerais)
‚îÇ ‚îî‚îÄ‚îÄ‚îÄworkflow_logs.json
‚îÇ
‚îú‚îÄ‚îÄ‚îÄoutputs # Arquivos gerados pelos m√≥dulos
‚îÇ ‚îú‚îÄ‚îÄ‚îÄmodule_4 # Sa√≠das do M√≥dulo 4 (ex: lista de espera)
‚îÇ ‚îú‚îÄ‚îÄ‚îÄmodule_6 # Sa√≠das do M√≥dulo 6 (ex: feedback coletado)
‚îÇ ‚îú‚îÄ‚îÄ‚îÄmodule_7 # Sa√≠das do M√≥dulo 7 (ex: FAQs para revis√£o)
‚îÇ ‚îî‚îÄ‚îÄ‚îÄmodule_9 # Sa√≠das do M√≥dulo 9 (ex: logs de viola√ß√£o)
‚îÇ
‚îî‚îÄ‚îÄ‚îÄrequirements # Arquivos de configura√ß√£o, prompts e dados est√°ticos
‚îú‚îÄ‚îÄ‚îÄmodule_1 # Configs/Prompts do M√≥dulo 1
‚îú‚îÄ‚îÄ‚îÄmodule_2 # Configs/Prompts/DB do M√≥dulo 2 (RAG)
‚îú‚îÄ‚îÄ‚îÄmodule_3 # Configs/Prompts do M√≥dulo 3
‚îú‚îÄ‚îÄ‚îÄmodule_4 # Configs/Prompts do M√≥dulo 4
‚îú‚îÄ‚îÄ‚îÄmodule_6 # Configs/Prompts do M√≥dulo 6
‚îú‚îÄ‚îÄ‚îÄmodule_7 # Configs/Prompts do M√≥dulo 7
‚îú‚îÄ‚îÄ‚îÄmodule_8 # Configs/Prompts do M√≥dulo 8
‚îî‚îÄ‚îÄ‚îÄmodule_9 # Configs/Prompts do M√≥dulo 9
```
## üìå Observa√ß√£o Importante para Avalia√ß√£o

O prot√≥tipo utiliza uma base de conhecimento de FAQs (para o M√≥dulo 2) extra√≠da de informa√ß√µes p√∫blicas da Bradesco Seguros, que √© inerentemente limitada. Portanto, **muitas perguntas podem n√£o ter uma resposta direta na base de FAQs**. Nesses casos, o comportamento **esperado e correto** do STELLAR √© acionar seus mecanismos de fallback (definidos pela arquitetura DAG) e encaminhar a intera√ß√£o para o fluxo de escalonamento humano (M√≥dulo 4), ap√≥s as devidas verifica√ß√µes dos M√≥dulos 9 e/ou 8. Observar esse comportamento demonstra o funcionamento adequado da l√≥gica de controle e das salvaguardas do sistema para lidar com consultas fora do escopo automatiz√°vel.

---

üìß Em caso de dificuldades t√©cnicas significativas durante a avalia√ß√£o deste prot√≥tipo, por favor, entre em contato: m252099@dac.unicamp.br
